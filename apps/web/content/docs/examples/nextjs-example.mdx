---
title: Next.js Example
description: Complete Next.js integration example with better-auth-ui
---

# Complete Next.js Example

This example shows a complete authentication flow in Next.js with protected routes, middleware, and error handling.

## Full Sign-In Page

```tsx title="app/auth/sign-in/page.tsx"
'use client'

import { CredentialLoginForm } from '@better-auth-ui/components'
import { authClient } from '@/lib/auth-client'
import { useRouter, useSearchParams } from 'next/navigation'
import { Suspense } from 'react'
import Link from 'next/link'

function SignInContent() {
  const router = useRouter()
  const searchParams = useSearchParams()
  const callbackUrl = searchParams.get('callbackUrl') || '/dashboard'

  return (
    <div className="flex min-h-screen items-center justify-center bg-gray-50 p-6">
      <div className="w-full max-w-md">
        <div className="rounded-lg border bg-white p-8 shadow-sm">
          {/* Header */}
          <div className="mb-6 text-center">
            <h1 className="text-2xl font-bold text-gray-900">Welcome back</h1>
            <p className="mt-2 text-gray-600">
              Sign in to access your account
            </p>
          </div>

          {/* Login Form */}
          <CredentialLoginForm
            authMethod="email"
            authClient={authClient}
            showRememberMe={true}
            showForgotPassword={true}
            forgotPasswordUrl="/auth/forgot-password"
            passwordValidation={{
              minLength: 8,
              requireUppercase: true,
              requireNumbers: true,
            }}
            onSuccess={async () => {
              // Invalidate any cached user data
              router.refresh()
              // Redirect to callback URL or dashboard
              router.push(callbackUrl)
            }}
            onError={(error) => {
              console.error('Authentication failed:', error.code, error.message)
            }}
            className="mt-4"
          />

          {/* Footer Links */}
          <div className="mt-6 text-center text-sm text-gray-600">
            Don't have an account?{' '}
            <Link
              href="/auth/sign-up"
              className="font-medium text-blue-600 hover:text-blue-500"
            >
              Sign up
            </Link>
          </div>
        </div>
      </div>
    </div>
  )
}

export default function SignInPage() {
  return (
    <Suspense fallback={<div>Loading...</div>}>
      <SignInContent />
    </Suspense>
  )
}
```

## Auth Client Configuration

```typescript title="lib/auth-client.ts"
import { createAuthClient } from 'better-auth/client'

export const authClient = createAuthClient({
  baseURL: process.env.NEXT_PUBLIC_API_URL || 'http://localhost:3000',
})

// Type-safe auth client methods
export async function getSession() {
  try {
    const session = await authClient.session.get()
    return session
  } catch {
    return null
  }
}

export async function signOut() {
  await authClient.signOut()
}
```

## Server-Side Auth Configuration

```typescript title="lib/auth.ts"
import { betterAuth } from 'better-auth'
import { PrismaAdapter } from 'better-auth/adapters/prisma'
import { prisma } from './prisma'

export const auth = betterAuth({
  database: new PrismaAdapter(prisma),
  emailAndPassword: {
    enabled: true,
    requireEmailVerification: process.env.NODE_ENV === 'production',
    sendResetPassword: async ({ user, url }) => {
      // Send password reset email
      await sendEmail({
        to: user.email,
        subject: 'Reset your password',
        html: `<a href="${url}">Reset password</a>`,
      })
    },
  },
  session: {
    expiresIn: 60 * 60 * 24 * 7, // 7 days
    updateAge: 60 * 60 * 24, // 1 day
  },
  rateLimit: {
    window: 60,
    max: 10,
  },
})
```

## Protected Dashboard Page

```tsx title="app/dashboard/page.tsx"
import { auth } from '@/lib/auth'
import { headers } from 'next/headers'
import { redirect } from 'next/navigation'
import { SignOutButton } from '@/components/sign-out-button'

export default async function DashboardPage() {
  const session = await auth.api.getSession({
    headers: headers(),
  })

  if (!session) {
    redirect('/auth/sign-in?callbackUrl=/dashboard')
  }

  return (
    <div className="min-h-screen bg-gray-50 p-8">
      <div className="mx-auto max-w-4xl">
        <div className="rounded-lg border bg-white p-6 shadow-sm">
          <div className="flex items-center justify-between">
            <div>
              <h1 className="text-2xl font-bold text-gray-900">Dashboard</h1>
              <p className="text-gray-600">
                Welcome, {session.user.name || session.user.email}
              </p>
            </div>
            <SignOutButton />
          </div>

          <div className="mt-8 grid gap-6 md:grid-cols-2">
            <div className="rounded-lg border p-4">
              <h2 className="font-semibold">Account Info</h2>
              <dl className="mt-2 space-y-1 text-sm">
                <div>
                  <dt className="text-gray-500">Email</dt>
                  <dd>{session.user.email}</dd>
                </div>
                <div>
                  <dt className="text-gray-500">User ID</dt>
                  <dd className="font-mono text-xs">{session.user.id}</dd>
                </div>
              </dl>
            </div>
          </div>
        </div>
      </div>
    </div>
  )
}
```

## Sign Out Button Component

```tsx title="components/sign-out-button.tsx"
'use client'

import { authClient } from '@/lib/auth-client'
import { useRouter } from 'next/navigation'
import { useState } from 'react'

export function SignOutButton() {
  const router = useRouter()
  const [isLoading, setIsLoading] = useState(false)

  const handleSignOut = async () => {
    setIsLoading(true)
    try {
      await authClient.signOut()
      router.push('/auth/sign-in')
      router.refresh()
    } catch (error) {
      console.error('Sign out failed:', error)
    } finally {
      setIsLoading(false)
    }
  }

  return (
    <button
      onClick={handleSignOut}
      disabled={isLoading}
      className="rounded-md bg-gray-900 px-4 py-2 text-sm font-medium text-white hover:bg-gray-800 disabled:opacity-50"
    >
      {isLoading ? 'Signing out...' : 'Sign out'}
    </button>
  )
}
```

## Environment Variables

```bash title=".env.local"
# Database
DATABASE_URL="postgresql://..."

# Auth
NEXT_PUBLIC_API_URL="http://localhost:3000"
BETTER_AUTH_SECRET="your-secret-key"

# Email (for password reset)
SMTP_HOST="smtp.example.com"
SMTP_PORT="587"
SMTP_USER="your-email@example.com"
SMTP_PASS="your-password"
```

## Next Steps

- [Add middleware for route protection](/docs/guides/nextjs-middleware)
- [Customize form appearance](/docs/components/credential-login)
- [Add OAuth providers](/docs/guides/oauth-providers)

